-- Insurance.sql
-- C Woods
-- October 2016

-- This script builds the database for an Insurance Claims system

PROMPT Dropping All Tables
PROMPT

DROP TABLE Payments;
DROP TABLE Claims;
DROP TABLE Policies;
DROP TABLE Holders;
DROP TABLE Policy_Types;

PROMPT
PROMPT Creating tables
PROMPT

CREATE TABLE Policy_Types
(Type char(1),
 Description char(25),
  CONSTRAINT pk_PolTypes PRIMARY KEY (Type));

CREATE TABLE Holders
(Holder_ID numeric(5),
 Surname char(20),
 Forename char(20),
 DOB Date,
 Phone char(14),
 CONSTRAINT pk_Holders PRIMARY KEY (Holder_ID));
 
CREATE TABLE Policies
(Policy_No numeric(7),
 Type char(1),
 Start_Date Date,
 Premium_Date Date,
 Premium_Amt numeric(5,2),
 Holder_ID numeric(5),
 CONSTRAINT pk_Policies PRIMARY KEY (Policy_No),
 CONSTRAINT fk_Policies_PolTypes FOREIGN KEY (Type) REFERENCES Policy_Types,
 CONSTRAINT fk_Policies_Holder FOREIGN KEY (Holder_ID) REFERENCES Holders);
 
CREATE TABLE Claims
(Policy_No numeric(7),
 Claim_Date Date,
 Amount numeric(8,2),
 CONSTRAINT pk_Claims PRIMARY KEY (Policy_No, Claim_Date),
 CONSTRAINT fk_Claims_Policies FOREIGN KEY (Policy_No) REFERENCES Policies);
 
CREATE TABLE Payments
(Policy_No numeric(7),
 Claim_Date Date,
 Pay_Date Date,
 Amount numeric(8,2),
 CONSTRAINT pk_Payments PRIMARY KEY (Policy_No, Claim_Date),
 CONSTRAINT fk_Payments_Claims FOREIGN KEY (Policy_No) REFERENCES Policies);
 
PROMPT
PROMPT Populating Policy Types
INSERT INTO Policy_Types
VALUES('M','MOTOR');
INSERT INTO Policy_Types
VALUES('W','Winter Sports');
INSERT INTO Policy_Types
VALUES('H','HOUSEHOLD');
INSERT INTO Policy_Types
VALUES('P','PET');
 
PROMPT
PROMPT Populating Holders

INSERT INTO Holders
VALUES(10001,'JONES','JOHN','15-MAR-76','087 2158777');
INSERT INTO Holders
VALUES(10002,'BYRNE','BILLY','24-AUG-65','087 3658789');
INSERT INTO Holders
VALUES(10003,'ADAMS','ALICE','01-JUN-84','086 2589445');
INSERT INTO Holders
VALUES(10004,'BRENNAN','JAMES','15-OCT-79','083 1211556');
INSERT INTO Holders
VALUES(10005,'OSULLIVAN','PETER','21-OCT-89','087 5688221');
INSERT INTO Holders
VALUES(10006,'JONES','MARY','15-APR-85','087 3365120');
INSERT INTO Holders
VALUES(10007,'MARTIN','PHILLIP','12-FEB-76','087 3355222');
INSERT INTO Holders
VALUES(10008,'WALSH','JAKE','16-NOV-76','089 6633225');
INSERT INTO Holders
VALUES(10009,'JENNINGS','KATE','28-FEB-87','085 1234567');
INSERT INTO Holders
VALUES(10010,'JONES','ABIGAIL','10-JUL-81','087 2158777');

PROMPT
PROMPT Populating Policies
 
INSERT INTO Policies
VALUES(2000101,'H','04-JAN-16','04-NOV-16',52.00,10001); 
INSERT INTO Policies
VALUES(2000102,'M','01-FEB-16','01-NOV-16',37.00,10002);
INSERT INTO Policies
VALUES(2000103,'M','20-DEC-16','20-OCT-16',37.00,10003);
INSERT INTO Policies
VALUES(2000104,'H','28-DEC-16','28-OCT-16',47.38,10004);
INSERT INTO Policies
VALUES(2000105,'H','20-OCT-16','20-NOV-16',45.23,10002);
INSERT INTO Policies
VALUES(2000106,'H','02-OCT-16','02-NOV-16',63.57,10006);
INSERT INTO Policies
VALUES(2000107,'P','04-APR-16','04-NOV-16',19.56,10009);
INSERT INTO Policies
VALUES(2000108,'M','18-JUL-16','18-OCT-16',83.17,10007);
INSERT INTO Policies
VALUES(2000109,'M','14-AUG-16','14-OCT-16',83.17,10010);
INSERT INTO Policies
VALUES(2000110,'P','11-OCT-16','11-NOV-16',23.00,10002);
INSERT INTO Policies
VALUES(2000111,'M','05-OCT-16','05-NOV-16',49.00,10008);
 
PROMPT
PROMPT Populating Claims
INSERT INTO Claims
VALUES(2000105, '18-SEP-14',1000);
INSERT INTO Claims
VALUES(2000105, '12-JUN-16',1752.56);
INSERT INTO Claims
VALUES(2000102, '28-MAY-16',4025.88);
INSERT INTO Claims
VALUES(2000108, '30-MAY-16',3550.00);
INSERT INTO Claims
VALUES(2000104, '16-JUN-16',1200.00);
INSERT INTO Claims
VALUES(2000109, '23-JUN-16',15600.00);
INSERT INTO Claims
VALUES(2000108, '30-SEP-16',2550.00);


PROMPT 
PROMPT Populating Payments

INSERT INTO Payments
VALUES(2000105, '18-SEP-14','25-NOV-14',3000.00);
INSERT INTO Payments
VALUES(2000109, '02-OCT-14','08-NOV-14',2000.00);
INSERT INTO Payments
VALUES(2000108, '16-OCT-14','09-NOV-14',1650.00);

INSERT INTO Payments
VALUES(2000103, '06-APR-15','10-MAY-15',3000.00);
INSERT INTO Payments
VALUES(2000104, '19-MAY-15','21-JUN-15',3000.00);

INSERT INTO Payments
VALUES(2000102, '28-MAY-16','01-JUL-16',3500.00);
INSERT INTO Payments
VALUES(2000104, '16-JUN-16','12-AUG-16',1200.00);
PROMPT
COMMIT;
 

 