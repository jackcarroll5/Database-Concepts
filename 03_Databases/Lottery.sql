-- Lottery.sql
-- This script builds the lottery ticket database

-- DROP ALL TABLES BEFORE BUILDING
DROP TABLE Draws;
DROP TABLE Tickets;
DROP TABLE Members;

PROMPT

--CREATE TABLES

CREATE TABLE Members
(Mem_ID numeric(4),
 Surname char(20),
 Forename char(15),
 Email char(20),
 CONSTRAINT pk_Members PRIMARY KEY (Mem_ID));


CREATE TABLE Tickets
(Ticket_NO numeric(5),
 Purch_Date Date,
 Mem_ID numeric(4),
 Cost numeric(4,2),
 Status char(1),
 CONSTRAINT pk_Tickets PRIMARY KEY (Ticket_NO),
 CONSTRAINT fk_Tick_Members FOREIGN KEY (Mem_ID) REFERENCES Members);

CREATE TABLE Draws
(Draw_ID numeric(4),
 Draw_Date Date,
 Ticket_1,
 Ticket_2,
 Ticket_3,
 CONSTRAINT pk_Draws PRIMARY KEY (Draw_ID),
 CONSTRAINT fk_Draw_Tick_1 FOREIGN KEY (Ticket_1) REFERENCES Tickets,
 CONSTRAINT fk_Draw_Tick_2 FOREIGN KEY (Ticket_2) REFERENCES Tickets,
 CONSTRAINT fk_Draw_Tick_3 FOREIGN KEY (Ticket_3) REFERENCES Tickets);

PROMPT

--POPULATE TABLES
INSERT INTO Members
VALUES(1,'SMITH','JOHN','js@gmail.com');
INSERT INTO Members
VALUES(2,'JONES','MARY','mj@eircom.net');
INSERT INTO Members
VALUES(3,'FLYNN','KEN','kflynn@hotmail.com');
INSERT INTO Members
VALUES(4,'JONES','ANNE','annj@gmail.com');
INSERT INTO Members
VALUES(5,'WOODS','ALICE','awoods1@gmail.com');
INSERT INTO Members
VALUES(6,'CLARKE','JOHN','js@gmail.com');
INSERT INTO Members
VALUES(7,'SMITH','JOHN','smithj@gmail.com');
INSERT INTO Members
VALUES(8,'SMITH','JANE','jgmail@eircom.net');
INSERT INTO Members
VALUES(9,'WALSH','FRANK','fw@yahoo.co.uk');
INSERT INTO Members
VALUES(10,'FALVEY','KATE','fk@gmail.com');

INSERT INTO Tickets
VALUES(10001,'01-MAY-17',5,2.00,'A');
INSERT INTO Tickets
VALUES(10002,'01-MAY-17',3,2.00,'A');
INSERT INTO Tickets
VALUES(10003,'01-MAY-17',2,2.00,'A');
INSERT INTO Tickets
VALUES(10004,'01-MAY-17',1,2.00,'A');
INSERT INTO Tickets
VALUES(10005,'01-MAY-17',6,2.00,'A');
INSERT INTO Tickets
VALUES(10006,'01-MAY-17',7,2.00,'A');

INSERT INTO Tickets
VALUES(10007,'02-MAY-17',2,2.00,'A');
INSERT INTO Tickets
VALUES(10008,'02-MAY-17',4,2.00,'A');
INSERT INTO Tickets
VALUES(10009,'03-MAY-17',3,2.00,'C');
INSERT INTO Tickets
VALUES(10010,'03-MAY-17',5,2.00,'C');
INSERT INTO Tickets
VALUES(10011,'04-MAY-17',7,2.00,'A');
INSERT INTO Tickets
VALUES(10012,'10-MAY-17',9,2.00,'A');

INSERT INTO Tickets
VALUES(10013,'02-JUN-17',1,2.00,'A');
INSERT INTO Tickets
VALUES(10014,'12-JUN-17',4,2.00,'A');
INSERT INTO Tickets
VALUES(10015,'13-JUN-17',1,2.00,'A');
INSERT INTO Tickets
VALUES(10016,'21-JUL-17',6,2.00,'A');
INSERT INTO Tickets
VALUES(10017,'22-JUL-17',7,2.00,'C');
INSERT INTO Tickets
VALUES(10018,'22-JUL-17',1,2.50,'A');

INSERT INTO Tickets
VALUES(10019,'05-AUG-17',1,2.50,'A');
INSERT INTO Tickets
VALUES(10020,'10-AUG-17',9,2.50,'A');
INSERT INTO Tickets
VALUES(10021,'11-AUG-17',6,2.50,'A');
INSERT INTO Tickets
VALUES(10022,'11-AUG-17',4,2.50,'C');
INSERT INTO Tickets
VALUES(10023,'13-AUG-17',2,2.50,'A');
INSERT INTO Tickets
VALUES(10024,'24-AUG-17',3,2.50,'A');
INSERT INTO Tickets
VALUES(10025,'26-AUG-17',1,2.50,'A');

INSERT INTO Tickets
VALUES(10026,'02-SEP-17',1,3.00,'A');
INSERT INTO Tickets
VALUES(10027,'10-SEP-17',2,3.00,'A');
INSERT INTO Tickets
VALUES(10028,'15-AUG-17',6,3.00,'A');

INSERT INTO Tickets
VALUES(10029,'11-AUG-17',4,3.50,'A');
INSERT INTO Tickets
VALUES(10030,'13-AUG-17',2,3.50,'A');
INSERT INTO Tickets
VALUES(10031,'24-AUG-17',3,3.50,'A');
INSERT INTO Tickets
VALUES(10032,'26-AUG-17',1,3.50,'A');

INSERT INTO Tickets
VALUES(10033,'09-SEP-17',6,3.50,'A');
INSERT INTO Tickets
VALUES(10034,'12-SEP-17',9,3.50,'A');
INSERT INTO Tickets
VALUES(10035,'18-SEP-17',2,3.50,'A');

INSERT INTO Draws
VALUES(01,'31-MAY-17',10004,10001,10002);

INSERT INTO Draws
VALUES(02,'30-JUN-17',10011,10003,10010);

INSERT INTO Draws
VALUES(03,'31-JUL-17',10007,10012,10016);

INSERT INTO Draws
VALUES(04,'31-AUG-17',10022,10008,10012);

INSERT INTO Draws
VALUES(05,'30-SEP-17',10022,10008,10012);

COMMIT;